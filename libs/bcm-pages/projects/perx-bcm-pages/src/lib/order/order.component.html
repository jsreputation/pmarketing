<div class="container">
  <div class="main">
    <div *ngIf="payload && isSummaryActivated" class="customer-info">
      <p>{{ payload?.name }}</p>
      <small>ID: {{ payload?.id }}</small>
    </div>
    <div class="order-form-container">
      <div class="icon-container" *ngIf="isSummaryActivated">
        <img src="../../assets/sales-record.png"/>    
        <span>{{"ORDER_PAGE.SALES_RECORD"|translate}}</span>
      </div>
      <form class="order-form" [formGroup]="orderForm" (ngSubmit)="onCompleteTransaction()">
        <div class="date-container">
          <div class="date">
            <mat-form-field appearance="standard" class="full-width__input read-only">
              <mat-label>{{"ORDER_PAGE.TRANSACTION_DATE"|translate}}</mat-label>
              <input matInput placeholder='{{"ORDER_PAGE.TRANSACTION_DATE"|translate}}' [readonly]="true" formControlName="transactionDate">
              <mat-icon matSuffix>calendar_today</mat-icon>
            </mat-form-field> 
          </div>
          <div class="time">
            <mat-form-field appearance="standard" class="full-width__input read-only">
              <mat-label>{{"ORDER_PAGE.TIME"|translate}}</mat-label>
              <input matInput placeholder='{{"ORDER_PAGE.TIME"|translate}}' [readonly]="true" formControlName="transactionTime">
              <mat-icon matSuffix>schedule</mat-icon>
            </mat-form-field> 
          </div>
        </div>
          <mat-form-field appearance="standard" class="full-width__input" [ngClass]="{'read-only' : isSummaryActivated}">
            <mat-label>{{"ORDER_PAGE.DESCRIPTION"|translate}}</mat-label>
            <input matInput placeholder='{{"ORDER_PAGE.DESCRIPTION"|translate}}' [readonly]="isSummaryActivated"
            formControlName="description" required>
            <mat-error *ngIf="description && description.hasError('required')">
              {{"ORDER_PAGE.DESCRIPTION_IS"|translate}} <strong>required</strong>
            </mat-error>
          </mat-form-field>        
          <mat-form-field appearance="standard" class="full-width__input input-hint" [ngClass]="{'read-only' : isSummaryActivated}">
            <mat-label>{{"ORDER_PAGE.AMOUNT_DUE"|translate}}</mat-label>
            <input matInput placeholder='{{"ORDER_PAGE.AMOUNT_DUE"|translate}}' [readonly]="isSummaryActivated" 
            formControlName="amountDue" required (change)="updateTotalAmount()">
            <mat-hint> {{"ORDER_PAGE.AMOUNT_DUE_HINT"|translate}}</mat-hint>
            <mat-error *ngIf="amountDue && amountDue.hasError('required')">
              {{"ORDER_PAGE.AMOUNT_DUE_IS"|translate}} <strong>required</strong>
            </mat-error>
          </mat-form-field>
          <mat-form-field appearance="standard" class="full-width__input" [ngClass]="{'read-only' : isSummaryActivated}">
            <mat-label>{{"ORDER_PAGE.DISCOUNT"|translate}}</mat-label>
            <input matInput placeholder='{{"ORDER_PAGE.DISCOUNT"|translate}}' [readonly]="isSummaryActivated"
            formControlName="discount" (change)="updateTotalAmount()">
          </mat-form-field>
          <mat-form-field appearance="standard" class="full-width__input input-hint" [ngClass]="{'read-only' : isSummaryActivated}">
            <mat-label>{{"ORDER_PAGE.POINTS_REDEEMED"|translate}}</mat-label>
            <input matInput placeholder='{{"ORDER_PAGE.POINTS_REDEEMED"|translate}}' [readonly]="isSummaryActivated"
            formControlName="pointsRedeemed" (change)="updateTotalAmount()">
            <mat-hint *ngIf="orderForm.value.pointsRedeemed">{{orderForm.value.pointsRedeemed}} point(s) = {{orderForm.value.pointsRedeemed * 10}} in currency</mat-hint>
          </mat-form-field>
          <mat-form-field appearance="standard" class="full-width__input read-only input-hint">
            <mat-label>{{"ORDER_PAGE.AMOUNT_PAID"|translate}}</mat-label>
            <input matInput placeholder='{{"ORDER_PAGE.AMOUNT_PAID"|translate}}' [readonly]="true" formControlName="amountPaid">
            <mat-hint>{{"ORDER_PAGE.AMOUNT_PAID_HINT"|translate}}</mat-hint>
          </mat-form-field>
          <div class="btn-container">
            <ng-container *ngIf="!isSummaryActivated; else summaryBlock">
              <button mat-raised-button [disabled]="!payload || !orderForm.valid" (click)="toggleSummary()" class="full-width__button mat-primary">{{"ORDER_PAGE.REVIEW"|translate}}</button>
              <button mat-flat-button (click)="onCancel()" class="full-width__button btn-transparent">{{"ORDER_PAGE.CANCEL"|translate}}</button>
            </ng-container>
            <ng-template #summaryBlock>
              <button mat-raised-button [disabled]="!payload && isSummaryActivated" type="submit" class="full-width__button mat-primary">{{"ORDER_PAGE.SUBMIT"|translate}}</button>
              <button mat-flat-button (click)="toggleSummary()" class="full-width__button btn-transparent">{{"ORDER_PAGE.BACK"|translate}}</button>
            </ng-template>
          </div>
      </form>          
    </div>
  </div>
</div>
