<div class="content-container">
  <div class="main-container" [ngSwitch]="currentStep">
    <h1 class="forgot-title" translate>STATIC_RESET_PASSWORD</h1>

    <ng-container *ngSwitchCase="1">
      <p class="subheading" translate>PI_INSTRUCTIONS</p>

      <form [formGroup]="phoneStepForm" (submit)="phoneHandler()">
        <mat-form-field class="full-width__input" appearance="fill">
          <mat-label>Country Code</mat-label>
          <mat-select [compareWith]="compareCtryFn" formControlName="countryCode">
            <mat-option [value]="country" *ngFor="let country of countriesList$ | async">
              <ng-container translate>{{country.name}}</ng-container>(+{{country.code}})
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="fill" class="full-width__input">
          <mat-label>{{"PI_TEXT_LABEL" | translate}}</mat-label>
          <input type="tel" matInput formControlName="phoneNumber">
          <mat-error *ngIf="phoneNumber?.errors?.required">
            {{"Required" | translate}}
          </mat-error>
          <mat-error *ngIf="phoneNumber?.errors?.pattern || phoneNumber?.errors?.minlength">
            {{"Please enter a valid number" | translate}}
          </mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" class="full-width__button">
          {{"Get OTP" | translate}}
        </button>
      </form>

    </ng-container>

    <ng-container *ngSwitchCase="2">
      <p class="subheading">
        <ng-container translate>Otp Sent</ng-container> (******{{identifier}}) <ng-container translate>Check your sms
        </ng-container>
      </p>
      <perx-core-pin-input class="forgot-pin" [length]="6" (full)="handlePin($event)"></perx-core-pin-input>

      <button mat-stroked-button class="forgot-resend" (click)="resend()" translate>{{ 'REDEND_OTP' | translate }}</button>
    </ng-container>

    <ng-container *ngSwitchCase="3">
      <form [formGroup]="newPasswordForm" (submit)="changePassword()">
        <mat-form-field appearance="fill" class="full-width__input">
          <mat-label translate>New Password</mat-label>
          <input type="password" matInput formControlName="newPassword">
          <mat-error *ngIf="password?.errors?.required">
            {{"Required" | translate}}
          </mat-error>
          <mat-error *ngIf="password?.errors?.minlength">
            {{"Password is too short" | translate}}
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="fill" class="full-width__input">
          <mat-label translate>Confirm Password</mat-label>
          <input type="password" matInput formControlName="passwordConfirmation">
          <mat-error *ngIf="passwordConfirmation?.errors?.required">
            {{"Required" | translate}}
          </mat-error>
          <mat-error *ngIf="passwordConfirmation?.errors?.minlength">
            {{"Password is too short" | translate}}
          </mat-error>
          <mat-error *ngIf="passwordConfirmation?.errors?.notEqual">
            {{"Password do not match" | translate}}
          </mat-error>
        </mat-form-field>

        <button mat-raised-button color="primary" class="full-width__button" translate>Set Password</button>
      </form>
    </ng-container>
  </div>
</div>
