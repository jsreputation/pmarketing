<div class="quest-container" *ngIf="campaign$ | async as campaign">
    <div class="quest-content-container">  
        <img [src]="questConfig?.imageUrl">
        <div class="quest-content">   
            <div class="progress-bar-container" *ngIf="campaign.enrolled || isEnrolled">
                <p>{{ questState === state.completed ? ('QUEST_CAMPAIGN.QUEST_COMPLETED' | translate) : ('QUEST_CAMPAIGN.PROGRESS' | translate) }} {{taskCompletedLen}} OF {{taskTotalLen}}</p>
                <mat-progress-bar mode="determinate" [value]="taskProgress"></mat-progress-bar>
            </div> 
            <div class="header">
                <p class="title">{{questConfig?.title}}</p>
                <p class="expiry-date">{{questConfig?.description}}</p>
                <p class="description">{{questConfig?.body}}</p>
            </div>  
            <div class="task-card-container" *ngIf="tasks$ | async as tasks">
                <div class="task-card" *ngFor="let task of tasks">
                    <div class="task-img-section">
                        <div class="task-img-container">
                            <img class="success-icon" [src]="questConfig?.successImageUrl" *ngIf="(completedTaskIds.includes(task.id))">
                            <img [src]="task.imageUrl">
                        </div>
                    </div>
                    <div class="task-content">
                        <p>
                            {{task.title}}
                        </p>
                        <p class="task-subtitle">
                            {{task.description}}
                        </p>
                    </div>
                </div>
            </div>
            <div class="reward-container">
                <p>{{ questState === state.completed ?  ('QUEST_CAMPAIGN.EARNED_PRIZES' | translate) : ('QUEST_CAMPAIGN.PRIZES' | translate) }} </p>
                <mat-list>
                    <mat-list-item *ngFor="let reward of campaign?.rewards"> <a [routerLink]="['/reward-detail',reward.id]">{{reward.name}} </a></mat-list-item>          
                </mat-list>
            </div>
            <h4 *ngIf="campaign.termsAndConditions">{{ 'QUEST_CAMPAIGN.TNC' | translate }}</h4>
            <div class="tnc" [innerHtml]="campaign.termsAndConditions"></div>
        </div>
    </div>
    <mat-toolbar class="bottom-toolbar mat-elevation-z2" *ngIf="!campaign.enrolled && !isEnrolled; else viewWalletTemplate">
        <button color="primary" (click)="startQuest(campaign.id)" mat-flat-button>
            {{ 'QUEST_CAMPAIGN.CTA_NEXT_TXT' | translate }}  
        </button>
    </mat-toolbar>
    <ng-template #viewWalletTemplate>
        <mat-toolbar class="bottom-toolbar mat-elevation-z2" *ngIf="questState === state.completed">
            <button color="primary" [routerLink]="['/wallet']" mat-flat-button>
                {{ 'QUEST_CAMPAIGN.VIEW_WALLET' | translate }}  
            </button>
        </mat-toolbar>
    </ng-template>
</div>
