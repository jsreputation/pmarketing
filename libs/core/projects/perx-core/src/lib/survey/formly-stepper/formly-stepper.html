<div class="progress-container">
  <div class="progress">
    <p class="progress-text">QN <strong>{{stepper.selectedIndex + 1}}</strong> / {{stepper._steps.length}}</p>
  </div>
  <div class="progress-bar">
    <mat-progress-bar mode="determinate" color="primary" [value]="stepper ? (stepper.selectedIndex / TOTAL_LENGTH) * 100 : 0"></mat-progress-bar>
  </div>
</div>
<mat-horizontal-stepper #stepper>
  <mat-step
    *ngFor="let step of field.fieldGroup; let index = index; let last = last;">
    <div class="question-overflow">
      <div class="question">
            <span>
                {{(index + 1) + '. ' + step.templateOptions.label}}
            </span>
        <span class="required-star">
                {{step.templateOptions.required ? '*': ''}}
          </span>
        <div class="description">
          {{  step.templateOptions.description }}
        </div>
      </div>
      <formly-field [field]="step"></formly-field>
    </div>

    <div class="button-flex-wrapper">
      <button matStepperPrevious *ngIf="index !== 0"
              mat-flat-button color="primary"
              class="back-btn"
              type="button">
        <mat-icon>keyboard_arrow_left</mat-icon>
      </button>

      <button matStepperNext *ngIf="!last"
              class="next-btn" type="button"
              mat-flat-button color="primary"
              [disabled]="!isValid(step)">
        Next
      </button>

      <button *ngIf="last"
              class="submit-btn"
              mat-flat-button color="primary"
              [disabled]="!form.valid"
              type="submit">
        Submit
      </button>
    </div>
  </mat-step>
</mat-horizontal-stepper>
