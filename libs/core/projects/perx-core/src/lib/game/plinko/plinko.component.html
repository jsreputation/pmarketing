<div class="game-container">
    <div class="contents-container">
        <svg width="276" height="486" viewBox="0 0 276 486" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path [attr.d]="ballPath" stroke-width="0" stroke="red" id="theMotionPath"/> 
            <animateMotion id="animateEl" fill="freeze" (beginEvent)="startedGame()" (endEvent)="finishedGame()"
             [attr.dur]="animationDuration" begin="indefinite" xlink:href="#custom_ball" [attr.path]="ballPath"/>              
            <g>
                <path opacity="0.8" fill-rule="evenodd" clip-rule="evenodd" d="M103.511 0V83.8694L0 201.532V0H103.511Z" fill="black"/>
                <path opacity="0.8" fill-rule="evenodd" clip-rule="evenodd" d="M168.489 0V83.8694L272 201.532V0H168.489Z" fill="black"/>
            </g>
            <g>
                <rect opacity="0.8" x="58.0266" y="429.911" width="48.96" height="49.1111" fill="black"/>
                <rect opacity="0.8" x="165.013" y="429.911" width="48.96" height="49.1111" fill="black"/>
            </g>
            <g id="custom_stage_elements" [attr.fill]="stageColor">
                <rect opacity="0.8" x="4.53345" y="429.911" width="48.96" height="49.1111" />
                <rect opacity="0.8" x="111.52" y="429.911" width="49" height="49"/>
                <image x="111.52" y="429.911" width="48" height="48" [attr.xlink:href]="targetImg" />
                <rect opacity="0.8" x="218.507" y="429.911" width="48.96" height="49.1111"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M103.511 0H98.9778V81.706L0 194.216V201.532L103.511 83.8693V83.8667V76.5528V0Z"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M168.489 0H173.022V81.706L272 194.216V201.532L168.489 83.8693V83.8667V76.5528V0Z"/>
                <rect x="53.4934" y="429.911" width="4.53333" height="49.1111"/>
                <rect x="106.987" y="429.911" width="4.53333" height="49.1111"/>
                <rect x="160.48" y="429.911" width="4.53333" height="49.1111"/>
                <rect x="213.973" y="429.911" width="4.53333" height="49.1111"/>
                <rect y="479.022" width="272" height="4.53333"/>
                <rect width="6" height="483.556"/>
                <rect x="266" width="6" height="483.556"/>
                <rect x="168.489" width="103.511" height="4.53333"/>
                <rect width="103.511" height="4.53333"/>
            </g>

            <g id="gate" [attr.fill]="stageColor">
                <path [ngClass]="{'open': startedAnimation}" class="left-gate" d="M103.511 34.7556L133.733 42.3112V46.8445L103.511 39.2889V34.7556Z"/>    
                <path [ngClass]="{'open': startedAnimation}" class="right-gate" d="M138.267 42.3112L168.489 34.7556V39.2889L138.267 46.8445V42.3112Z"/>
            </g>
            
            <g id="peg_container" [attr.fill]="stageColor">   
                <g>
                <path d="M128 108.556C128 104.137 131.582 100.556 136 100.556C140.418 100.556 144 104.137 144 108.556C144 112.974 140.418 116.556 136 116.556C131.582 116.556 128 112.974 128 108.556Z"/>
                <rect x="128" y="100.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M101.5 137.556C101.5 133.137 105.082 129.556 109.5 129.556C113.918 129.556 117.5 133.137 117.5 137.556C117.5 141.974 113.918 145.556 109.5 145.556C105.082 145.556 101.5 141.974 101.5 137.556Z"/>
                <rect x="101.5" y="129.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M154.5 137.556C154.5 133.137 158.082 129.556 162.5 129.556C166.918 129.556 170.5 133.137 170.5 137.556C170.5 141.974 166.918 145.556 162.5 145.556C158.082 145.556 154.5 141.974 154.5 137.556Z"/>
                <rect x="154.5" y="129.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M75 166.556C75 162.137 78.5817 158.556 83 158.556C87.4183 158.556 91 162.137 91 166.556C91 170.974 87.4183 174.556 83 174.556C78.5817 174.556 75 170.974 75 166.556Z"/>
                <rect x="75" y="158.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M128 166.556C128 162.137 131.582 158.556 136 158.556C140.418 158.556 144 162.137 144 166.556C144 170.974 140.418 174.556 136 174.556C131.582 174.556 128 170.974 128 166.556Z"/>
                <rect x="128" y="158.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M181 166.556C181 162.137 184.582 158.556 189 158.556C193.418 158.556 197 162.137 197 166.556C197 170.974 193.418 174.556 189 174.556C184.582 174.556 181 170.974 181 166.556Z"/>
                <rect x="181" y="158.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M48.5 195.556C48.5 191.137 52.0817 187.556 56.5 187.556C60.9183 187.556 64.5 191.137 64.5 195.556C64.5 199.974 60.9183 203.556 56.5 203.556C52.0817 203.556 48.5 199.974 48.5 195.556Z"/>
                <rect x="48.5" y="187.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M101.5 195.556C101.5 191.137 105.082 187.556 109.5 187.556C113.918 187.556 117.5 191.137 117.5 195.556C117.5 199.974 113.918 203.556 109.5 203.556C105.082 203.556 101.5 199.974 101.5 195.556Z"/>
                <rect x="101.5" y="187.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M154.5 195.556C154.5 191.137 158.082 187.556 162.5 187.556C166.918 187.556 170.5 191.137 170.5 195.556C170.5 199.974 166.918 203.556 162.5 203.556C158.082 203.556 154.5 199.974 154.5 195.556Z"/>
                <rect x="154.5" y="187.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M207.5 195.556C207.5 191.137 211.082 187.556 215.5 187.556C219.918 187.556 223.5 191.137 223.5 195.556C223.5 199.974 219.918 203.556 215.5 203.556C211.082 203.556 207.5 199.974 207.5 195.556Z"/>
                <rect x="207.5" y="187.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M22 224.556C22 220.137 25.5817 216.556 30 216.556C34.4183 216.556 38 220.137 38 224.556C38 228.974 34.4183 232.556 30 232.556C25.5817 232.556 22 228.974 22 224.556Z"/>
                <rect x="22" y="216.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M75 224.556C75 220.137 78.5817 216.556 83 216.556C87.4183 216.556 91 220.137 91 224.556C91 228.974 87.4183 232.556 83 232.556C78.5817 232.556 75 228.974 75 224.556Z"/>
                <rect x="75" y="216.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M128 224.556C128 220.137 131.582 216.556 136 216.556C140.418 216.556 144 220.137 144 224.556C144 228.974 140.418 232.556 136 232.556C131.582 232.556 128 228.974 128 224.556Z"/>
                <rect x="128" y="216.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M181 224.556C181 220.137 184.582 216.556 189 216.556C193.418 216.556 197 220.137 197 224.556C197 228.974 193.418 232.556 189 232.556C184.582 232.556 181 228.974 181 224.556Z"/>
                <rect x="181" y="216.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M234 224.556C234 220.137 237.582 216.556 242 216.556C246.418 216.556 250 220.137 250 224.556C250 228.974 246.418 232.556 242 232.556C237.582 232.556 234 228.974 234 224.556Z"/>
                <rect x="234" y="216.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M48.5 253.556C48.5 249.137 52.0817 245.556 56.5 245.556C60.9183 245.556 64.5 249.137 64.5 253.556C64.5 257.974 60.9183 261.556 56.5 261.556C52.0817 261.556 48.5 257.974 48.5 253.556Z"/>
                <rect x="48.5" y="245.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M101.5 253.556C101.5 249.137 105.082 245.556 109.5 245.556C113.918 245.556 117.5 249.137 117.5 253.556C117.5 257.974 113.918 261.556 109.5 261.556C105.082 261.556 101.5 257.974 101.5 253.556Z"/>
                <rect x="101.5" y="245.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M154.5 253.556C154.5 249.137 158.082 245.556 162.5 245.556C166.918 245.556 170.5 249.137 170.5 253.556C170.5 257.974 166.918 261.556 162.5 261.556C158.082 261.556 154.5 257.974 154.5 253.556Z"/>
                <rect x="154.5" y="245.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M207.5 253.556C207.5 249.137 211.082 245.556 215.5 245.556C219.918 245.556 223.5 249.137 223.5 253.556C223.5 257.974 219.918 261.556 215.5 261.556C211.082 261.556 207.5 257.974 207.5 253.556Z"/>
                <rect x="207.5" y="245.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M22 282.556C22 278.137 25.5817 274.556 30 274.556C34.4183 274.556 38 278.137 38 282.556C38 286.974 34.4183 290.556 30 290.556C25.5817 290.556 22 286.974 22 282.556Z"/>
                <rect x="22" y="274.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M75 282.556C75 278.137 78.5817 274.556 83 274.556C87.4183 274.556 91 278.137 91 282.556C91 286.974 87.4183 290.556 83 290.556C78.5817 290.556 75 286.974 75 282.556Z"/>
                <rect x="75" y="274.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M128 282.556C128 278.137 131.582 274.556 136 274.556C140.418 274.556 144 278.137 144 282.556C144 286.974 140.418 290.556 136 290.556C131.582 290.556 128 286.974 128 282.556Z"/>
                <rect x="128" y="274.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M181 282.556C181 278.137 184.582 274.556 189 274.556C193.418 274.556 197 278.137 197 282.556C197 286.974 193.418 290.556 189 290.556C184.582 290.556 181 286.974 181 282.556Z"/>
                <rect x="181" y="274.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M234 282.556C234 278.137 237.582 274.556 242 274.556C246.418 274.556 250 278.137 250 282.556C250 286.974 246.418 290.556 242 290.556C237.582 290.556 234 286.974 234 282.556Z"/>
                <rect x="234" y="274.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M48.5 311.556C48.5 307.137 52.0817 303.556 56.5 303.556C60.9183 303.556 64.5 307.137 64.5 311.556C64.5 315.974 60.9183 319.556 56.5 319.556C52.0817 319.556 48.5 315.974 48.5 311.556Z"/>
                <rect x="48.5" y="303.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M101.5 311.556C101.5 307.137 105.082 303.556 109.5 303.556C113.918 303.556 117.5 307.137 117.5 311.556C117.5 315.974 113.918 319.556 109.5 319.556C105.082 319.556 101.5 315.974 101.5 311.556Z"/>
                <rect x="101.5" y="303.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M154.5 311.556C154.5 307.137 158.082 303.556 162.5 303.556C166.918 303.556 170.5 307.137 170.5 311.556C170.5 315.974 166.918 319.556 162.5 319.556C158.082 319.556 154.5 315.974 154.5 311.556Z"/>
                <rect x="154.5" y="303.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M207.5 311.556C207.5 307.137 211.082 303.556 215.5 303.556C219.918 303.556 223.5 307.137 223.5 311.556C223.5 315.974 219.918 319.556 215.5 319.556C211.082 319.556 207.5 315.974 207.5 311.556Z"/>
                <rect x="207.5" y="303.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M22 340.556C22 336.137 25.5817 332.556 30 332.556C34.4183 332.556 38 336.137 38 340.556C38 344.974 34.4183 348.556 30 348.556C25.5817 348.556 22 344.974 22 340.556Z"/>
                <rect x="22" y="332.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M75 340.556C75 336.137 78.5817 332.556 83 332.556C87.4183 332.556 91 336.137 91 340.556C91 344.974 87.4183 348.556 83 348.556C78.5817 348.556 75 344.974 75 340.556Z"/>
                <rect x="75" y="332.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M128 340.556C128 336.137 131.582 332.556 136 332.556C140.418 332.556 144 336.137 144 340.556C144 344.974 140.418 348.556 136 348.556C131.582 348.556 128 344.974 128 340.556Z"/>
                <rect x="128" y="332.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M181 340.556C181 336.137 184.582 332.556 189 332.556C193.418 332.556 197 336.137 197 340.556C197 344.974 193.418 348.556 189 348.556C184.582 348.556 181 344.974 181 340.556Z"/>
                <rect x="181" y="332.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M234 340.556C234 336.137 237.582 332.556 242 332.556C246.418 332.556 250 336.137 250 340.556C250 344.974 246.418 348.556 242 348.556C237.582 348.556 234 344.974 234 340.556Z"/>
                <rect x="234" y="332.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M48.5 369.556C48.5 365.137 52.0817 361.556 56.5 361.556C60.9183 361.556 64.5 365.137 64.5 369.556C64.5 373.974 60.9183 377.556 56.5 377.556C52.0817 377.556 48.5 373.974 48.5 369.556Z"/>
                <rect x="48.5" y="361.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M101.5 369.556C101.5 365.137 105.082 361.556 109.5 361.556C113.918 361.556 117.5 365.137 117.5 369.556C117.5 373.974 113.918 377.556 109.5 377.556C105.082 377.556 101.5 373.974 101.5 369.556Z"/>
                <rect x="101.5" y="361.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M154.5 369.556C154.5 365.137 158.082 361.556 162.5 361.556C166.918 361.556 170.5 365.137 170.5 369.556C170.5 373.974 166.918 377.556 162.5 377.556C158.082 377.556 154.5 373.974 154.5 369.556Z"/>
                <rect x="154.5" y="361.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M207.5 369.556C207.5 365.137 211.082 361.556 215.5 361.556C219.918 361.556 223.5 365.137 223.5 369.556C223.5 373.974 219.918 377.556 215.5 377.556C211.082 377.556 207.5 373.974 207.5 369.556Z"/>
                <rect x="207.5" y="361.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M22 398.556C22 394.137 25.5817 390.556 30 390.556C34.4183 390.556 38 394.137 38 398.556C38 402.974 34.4183 406.556 30 406.556C25.5817 406.556 22 402.974 22 398.556Z"/>
                <rect x="22" y="390.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M75 398.556C75 394.137 78.5817 390.556 83 390.556C87.4183 390.556 91 394.137 91 398.556C91 402.974 87.4183 406.556 83 406.556C78.5817 406.556 75 402.974 75 398.556Z"/>
                <rect x="75" y="390.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M128 398.556C128 394.137 131.582 390.556 136 390.556C140.418 390.556 144 394.137 144 398.556C144 402.974 140.418 406.556 136 406.556C131.582 406.556 128 402.974 128 398.556Z"/>
                <rect x="128" y="390.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M181 398.556C181 394.137 184.582 390.556 189 390.556C193.418 390.556 197 394.137 197 398.556C197 402.974 193.418 406.556 189 406.556C184.582 406.556 181 402.974 181 398.556Z"/>
                <rect x="181" y="390.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M234 398.556C234 394.137 237.582 390.556 242 390.556C246.418 390.556 250 394.137 250 398.556C250 402.974 246.418 406.556 242 406.556C237.582 406.556 234 402.974 234 398.556Z"/>
                <rect x="234" y="390.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M48.5 427.556C48.5 423.137 52.0817 419.556 56.5 419.556C60.9183 419.556 64.5 423.137 64.5 427.556C64.5 431.974 60.9183 435.556 56.5 435.556C52.0817 435.556 48.5 431.974 48.5 427.556Z"/>
                <rect x="48.5" y="419.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M101.5 427.556C101.5 423.137 105.082 419.556 109.5 419.556C113.918 419.556 117.5 423.137 117.5 427.556C117.5 431.974 113.918 435.556 109.5 435.556C105.082 435.556 101.5 431.974 101.5 427.556Z"/>
                <rect x="101.5" y="419.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M154.5 427.556C154.5 423.137 158.082 419.556 162.5 419.556C166.918 419.556 170.5 423.137 170.5 427.556C170.5 431.974 166.918 435.556 162.5 435.556C158.082 435.556 154.5 431.974 154.5 427.556Z"/>
                <rect x="154.5" y="419.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
                <g>
                <path d="M207.5 427.556C207.5 423.137 211.082 419.556 215.5 419.556C219.918 419.556 223.5 423.137 223.5 427.556C223.5 431.974 219.918 435.556 215.5 435.556C211.082 435.556 207.5 431.974 207.5 427.556Z"/>
                <rect x="207.5" y="419.556" width="16" height="16" rx="8" fill="url(#peg_radial)" fill-opacity="0.5"/>
                </g>
            </g>
            <g id="custom_ball" [attr.transform]="transformVal">
                <circle cx="135.5" cy="29.1333" r="12.0889" [attr.fill]="ballColor"/>
                <circle cx="135.5" cy="29.1333" r="12.0889" fill="url(#ball_radial)" fill-opacity="0.5"/>
                <path opacity="0.8" fill-rule="evenodd" clip-rule="evenodd" d="M142.997 24.9684C144.333 26.6825 145.13 28.8385 145.13 31.1804C145.13 32.1495 144.993 33.0867 144.739 33.9739C145.442 33.3717 146.234 32.6967 147.068 31.9866C147.169 31.3842 147.221 30.7654 147.221 30.1344C147.221 27.3771 146.221 24.8534 144.564 22.9064L142.997 24.9684ZM142.259 39.4157L143.07 37.2981C141.319 39.5986 138.604 41.1262 135.528 41.2791C135.706 41.2875 135.885 41.2917 136.064 41.2917C138.356 41.2917 140.486 40.6007 142.259 39.4157Z" fill="white" fill-opacity="0.5"/>
                <path d="M136 40.3111C130.428 40.3111 125.911 35.7941 125.911 30.2222H121.911C121.911 38.0033 128.219 44.3111 136 44.3111V40.3111ZM146.089 30.2222C146.089 35.7941 141.572 40.3111 136 40.3111V44.3111C143.781 44.3111 150.089 38.0033 150.089 30.2222H146.089ZM136 20.1333C141.572 20.1333 146.089 24.6502 146.089 30.2222H150.089C150.089 22.4411 143.781 16.1333 136 16.1333V20.1333ZM136 16.1333C128.219 16.1333 121.911 22.4411 121.911 30.2222H125.911C125.911 24.6502 130.428 20.1333 136 20.1333V16.1333Z" fill="black" fill-opacity="0.05"/> 
            </g>
            <defs>
            <radialGradient id="ball_radial" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(30 6) rotate(105.255) scale(22.8035)">
                <stop offset="0.251693" stop-color="white"/>
                <stop offset="1" stop-color="white" stop-opacity="0"/>
            </radialGradient>
            <radialGradient id="peg_radial" cx="0" cy="0" r="1">
                <stop stop-color="white"/>
                <stop offset="1" stop-color="white" stop-opacity="0"/>
            </radialGradient>
            </defs>
        </svg>
    </div>
</div>  
