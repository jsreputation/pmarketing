<div class="phonepreview-wrapper">
  <div class="forms-container">
    <!--template-->
    <mat-card class="card linkable" *ngIf="campaign?.template" (click)="navigateToEdit()">
      <div class="card-header">
        <h2 class="card-title">
          {{'CAMPAIGN.TEMPLATE' | translate}}
        </h2>
      </div>
      <div class="card-engagement-item-adjuster">
        <cl-engagement-item [data]="campaign?.template"></cl-engagement-item>
      </div>
    </mat-card>
    <!--rewards-->
    <mat-card class="card" *ngIf="stampsHasRewards">
      <div *ngFor="let slot of slots">
        <div *ngIf="hasRewardsInSlot(slot)">
          <div class="card-header">
            <p class="card-title" *ngIf="slot > 0">
                {{'CAMPAIGN.REWARDS_FOR_SLOT' | translate}}
                {{slot}}
            </p>
            <p class="card-title" *ngIf="slot === 0">
                {{'CAMPAIGN.REWARDS' | translate}}
            </p>
          </div>
          <div *ngFor="let outcome of campaign?.outcomes">
            <div class="card-content" *ngIf="outcome?.outcome?.slotNumber === slot">
              <cl-reward-item-preview
                class="item"
                [data]="outcome?.reward"
                [probability]="outcome?.outcome?.probability"
                [limit]="outcome?.outcome?.limit"
                [enableProbability]="outcome?.enableProbability">
              </cl-reward-item-preview>
            </div>
          </div>
        </div>
      </div>
    </mat-card>
    <!--limits-->
    <mat-card class="card" *ngIf="campaign?.limits?.times">
      <div class="card-header">
        <h2 class="card-title">
          {{'CAMPAIGN.PLAY_LIMITS' | translate}}
        </h2>
      </div>
      <div class="card-content">
        <dl class="card-definitions">
          <div class="card-definitions-splitter">
            <div *ngIf="campaign?.limits?.times">
              <dt class="card-label">
                {{'CAMPAIGN.LIMIT_PER_USER' | translate}}
              </dt>
              <dd class="card-value">{{campaign?.limits?.times}}
                {{'CAMPAIGN.TIME' | translate}}{{campaign?.limits?.times > 1 ? 's' : ''}}
              </dd>
            </div>
            <div *ngIf="campaign?.limits?.duration">
              <dt class="card-label">
                {{'CAMPAIGN.LIMIT_PER_DURATION' | translate}}
              </dt>
              <dd class="card-value">{{campaign?.limits?.duration}}</dd>
            </div>
          </div>
        </dl>
      </div>
    </mat-card>
    <!--campaign info-->
    <mat-card class="card" *ngIf="campaign?.campaignInfo">
      <div class="card-header">
        <h2 class="card-title">
          {{'CAMPAIGN.CAMPAIGN_INFO' | translate}}
        </h2>
      </div>

      <div class="card-content">
        <dl class="card-definitions">
          <div *ngIf="campaign?.campaignInfo?.goal">
            <dt class="card-label">
              {{'CAMPAIGN.CAMPAIGN_GOAL' | translate}}
            </dt>
            <dd class="card-value">{{campaign?.campaignInfo?.goal}}</dd>
          </div>

          <div *ngIf="campaign?.campaignInfo?.startDate">
            <dt class="card-label">
              {{'CAMPAIGN.CAMPAIGN_DURATION' | translate}}
            </dt>
            <dd class="card-value">
              <span>
                <span>{{campaign?.campaignInfo?.startDate | date: 'mediumDate' }}</span>
                <span>&nbsp;{{campaign?.campaignInfo?.startTime}}</span>
              </span>
              <ng-container *ngIf="campaign?.campaignInfo?.endDate">
                <small>
                  {{'TO' | translate}}
                </small>
                <span>
                  <span>{{campaign?.campaignInfo?.endDate | date: 'mediumDate' }}</span>
                  <span>&nbsp;{{campaign?.campaignInfo?.endTime}}</span>
                </span>
              </ng-container>
            </dd>
          </div>

          <div *ngIf="campaign?.campaignInfo?.labels && campaign?.campaignInfo?.labels?.length > 0">
            <dt class="card-label">
              {{'CAMPAIGN.LABEL' | translate}}
            </dt>
            <dd class="card-value">
              <span class="card-chip" *ngFor="let label of campaign?.campaignInfo?.labels">{{label}}</span>
            </dd>
          </div>
        </dl>
      </div>
    </mat-card>
    <!--/ campaign info-->
    <!-- channel -->
    <mat-card class="card">
      <div class="card-header">
        <h2 class="card-title">
          {{'CAMPAIGN.CHANNEL' | translate}}
        </h2>
      </div>
      <!--WebLink-->
      <div class="card-content" *ngIf="campaign?.notification?.webNotification?.webLink">
        <h3 class="card-label">
          {{'CAMPAIGN.INFORMATION_COLLECTION' | translate}}
        </h3>
        <!--Message-->
        <div class="card-section" *ngIf="campaign?.notification?.webNotification?.webLink">
          <div class="card-header">
            <h3 class="card-title">
              {{ informationCollectionSettingTitle | translate}}
            </h3>
          </div>
        </div>
      </div>

      <div class="sms" *ngIf="checkSmsExist()">
        <!--Message-->
        <h3 class="card-label label-text">
          {{ 'CAMPAIGN.CHANNEL_TYPES.SMS' | translate}}
        </h3>
      </div>

      <ng-container *ngIf="campaign?.notification?.launch?.length">
        <!--Message-->
        <div class="card-content">
          <div class="card-section" *ngFor="let launch of campaign.notification.launch; let index = index;" >
            <div class="card-header">
              <div class="card-title">
                <section >
                  <h2 class="card-title message-title">
                    {{'CAMPAIGN.ON_CAMPAIGN_LAUNCH_MESSAGE' | translate}}
                    <span>{{index + 1}}</span>
                  </h2>
                  <div class="input-group notification-row">
                  <span>
                    {{'CAMPAIGN.MESSAGE_WILL_BE_SENT_ON' | translate}}
                  </span>
                    <span>
                    {{getSendType(launch.sentType) | translate}}
                  </span>
                  </div>
                  <div *ngIf="launch.sentType === launchType.launchDate" class="notification-date-time">
                    {{'CAMPAIGN.MESSAGE_WILL_BE_SENT_ON' | translate}}
                    {{campaign?.campaignInfo?.startDate | date: 'dd/MM/yyyy'}}
                    {{'CAMPAIGN.AT' | translate}}
                    {{campaign?.campaignInfo?.startTime}}.
                  </div>

                  <section *ngIf="launch.sentType === launchType.usersDateBirth"
                           class="notification-date-time input-group notification-row">
                  <span>
                    {{'CAMPAIGN.MESSAGE_SENT_ON_BIRTHDAY' | translate}}
                  </span>
                    <div class="date-field">
                      {{launch.birthdayTime}}
                    </div>
                  </section>

                  <section *ngIf="launch.sentType === launchType.usersMonthBirth"
                           class="notification-date-time input-group notification-row">
                  <span>
                    {{'CAMPAIGN.MESSAGE_SENT_ON_DAY' | translate}}
                  </span>
                    <span>
                    {{launch.monthDay}}
                  </span>
                    <span>
                    {{'CAMPAIGN.OF_THE_USER_BIRTH_MONTH_AT' | translate}}
                  </span>
                    <div class="date-field">
                      {{launch.birthdayTime}}
                    </div>
                  </section>

                  <div class="card-section">
                    <div class="card-header">
                      <h3 class="card-title">
                        {{'CAMPAIGN.MESSAGE' | translate}}
                      </h3>
                    </div>
                    <div class="card-content">
                      {{launch.template.message}}
                    </div>
                  </div>
                </section>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="campaign?.notification?.completed?.length">
        <!--Message-->
        <div class="card-content">
          <div class="card-section" *ngFor="let completed of campaign.notification.completed; let index = index;" >
            <div class="card-header">
              <div class="card-title">
                <!--start completed-->
                <section>
                  <h2 class="card-title message-title">
                    {{'CAMPAIGN.CAMPAIGN_NOT_COMPLETED_MESSAGE' | translate}} <span>{{index + 1}}</span>
                  </h2>
                  <div class="input-group notification-row">
                    <span>
                      {{'CAMPAIGN.MESSAGE_WILL_BE_SENT_ON' | translate}}
                    </span>
                    <span>
                      {{completed.numberPeriod }}
                    </span>
                    <span>
                      {{completed.type | translate }}
                    </span>
                    <span>{{'CAMPAIGN.AFTER_CAMPAIGN_STARTS' | translate}} </span>
                  </div>
                  <div class="input-group notification-row">
                    <span>{{'CAMPAIGN.AT' | translate}}</span>
                    <div class="date-field">
                      <span>
                        {{completed.time}}
                      </span>
                    </div>
                    <span>
                      {{'CAMPAIGN.NOT_COMPLETED_CAMPAIGN' | translate}}
                    </span>
                  </div>
                  <div class="card-section">
                    <div class="card-header">
                      <h3 class="card-title">
                        {{'CAMPAIGN.MESSAGE' | translate}}
                      </h3>
                    </div>
                    <div class="card-content">
                      {{completed.template.message}}
                    </div>
                  </div>
                </section>
                <!--end completed-->
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="campaign?.notification?.campaignEnds?.length">
        <!--Message-->
        <div class="card-content">
          <div class="card-section" *ngFor="let campaignEnds of campaign.notification.campaignEnds; let index = index;" >
            <div class="card-header">
              <div class="card-title">
                <!--start campaignEnds-->
                <section>
                  <h2 class="card-title message-title">
                    {{'CAMPAIGN.BEFORE_CAMPAIGN_ENDS_MESSAGE' | translate}} <span>{{index + 1}}</span>
                  </h2>
                  <div class="input-group notification-row">
                    <span>
                      {{'CAMPAIGN.MESSAGE_WILL_BE_SENT_ON' | translate}}
                    </span>
                    <span>
                      {{campaignEnds.numberPeriod }}
                    </span>

                    <span>
                      {{campaignEnds.type | translate }}
                    </span>
                    <span>
                      {{'CAMPAIGN.BEFORE_CAMPAIGN_ENDS' | translate}},
                    </span>
                  </div>
                  <div class="input-group notification-row">
                    <span>{{'CAMPAIGN.AT' | translate}}</span>
                    <span>{{campaignEnds.time}}</span>
                  </div>
                  <div class="card-section">
                    <div class="card-header">
                      <h3 class="card-title">
                        {{'CAMPAIGN.MESSAGE' | translate}}
                      </h3>
                    </div>
                    <div class="card-content">
                      {{campaignEnds.template.message}}
                    </div>
                  </div>
                </section>
                <!--end campaignEnds-->

              </div>
            </div>
          </div>
        </div>
      </ng-container>



    </mat-card>
    <!-- TODO: Audience currently we don't have the field in Figma design, hide first -->
  </div>
  <cl-campaigns-mobile-preview [storeTemplate$]="store.template$" [tenantSettings]="tenantSettings">
  </cl-campaigns-mobile-preview>
</div>
