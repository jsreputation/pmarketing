<section class="page-header">
  <h1 class="title">{{'AUDIENCE_FEATURE.AUDIENCES' | translate}}</h1>
  <cl-button
    classList="primary cta cta-edit"
    (click)="openEditUserDialog()">
    {{'BTN_EDIT' | translate}}
  </cl-button>
</section>

<cl-audiences-user-info [user]="user"></cl-audiences-user-info>

<section class="content">
  <mat-tab-group>
    <mat-tab label="Vouchers">
      <div class="audience-list-content">
        <!--filters-->
        <cl-table-filters [dataSource]="vouchersDataSource" classList="block">
          <ng-container *clTableFilter="'rewardName'; let filter">
            <cl-search-filter class="search-block" [control]="filter"
                              [placeholder]="'AUDIENCE_FEATURE.SEARCH_VOUCHERS' | translate"></cl-search-filter>
            <cl-button [classList]="'primary'"
                       (click)="openSelectRewardPopup()">
              <span>{{'AUDIENCE_FEATURE.ISSUE_VOUCHER' | translate}}</span>
            </cl-button>
          </ng-container>
        </cl-table-filters>

        <div class="table-card">
          <!--table-->
          <cl-audiences-vouchers-list [dataSource]="vouchersDataSource"
                                      (clickChangeExpiryDate)="openChangeExpiryDateDialog($event)">
          </cl-audiences-vouchers-list>
          <!--/table-->
          <!--paginator-->
          <cl-paginator [dataSource]="vouchersDataSource"
                        [pageSize]="5"
                        [pageSizeOptions]="[5, 10, 20]"></cl-paginator>
          <!--/paginator-->
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Loyalty" class="audience-list-content">
      <div class="audience-list-content">
        <div class="audience-list-loyalty-panel">
          <cl-button classList="primary" (click)="openAddLoyaltyPopup()">Add Loyalty</cl-button>
        </div>
        <!--table-->
        <div class="table-card">
          <cl-audiences-loyalty-grid
            [dataSource]="loyaltyDataSource"
            [menuOptions]="loyaltyMenuOptions"
            (menuTapped)="handleAudiencesUserInfoActions($event)"
          >
          </cl-audiences-loyalty-grid>
          <!--/table-->
          <!--paginator-->
          <!--            <cl-paginator [dataSource]="dataSourceCommunications"-->
          <!--                          [pageSize]="5"-->
          <!--                          [pageSizeOptions]="[5, 10, 20]"></cl-paginator>-->
          <!--/paginator-->
        </div>
      </div>
    </mat-tab>
    <mat-tab label="Communications" class="audience-list-content">
      <div class="audience-list-content">
        <div class="table-card">
          <!--table-->
          <cl-audiences-communications-list [dataSource]="CommunicationsDataSource">
          </cl-audiences-communications-list>
          <!--/table-->
          <!--paginator-->
          <cl-paginator [dataSource]="CommunicationsDataSource"
                        [pageSize]="5"
                        [pageSizeOptions]="[5, 10, 20]"></cl-paginator>
          <!--/paginator-->
        </div>
      </div>
    </mat-tab>
  </mat-tab-group>

</section>
