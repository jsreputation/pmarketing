<section class="create-merchant-form" [formGroup]="formMerchant">
  <div class="merchant-form">
    <div class="control-input merchant-upload-img">
      <cl-upload-graphic [formControl]="image"
                         [isRequired]="image.hasError('required') && image.touched">
        <span translate>ADD_IMAGE</span>
      </cl-upload-graphic>
    </div>
    <div class="control-input merchant-name" *ngIf="settings.shoveName">
      <mat-form-field class="mat-form-field">
      <input type="text" matInput [placeholder]="'MERCHANT_NAME' | translate" [formControl]="name">
      <mat-hint align="end">{{name.value?.length || 0}}/60</mat-hint>
      <mat-error *ngIf="name.hasError('required')" translate>ERROR_REQUIRED</mat-error>
      <mat-error *ngIf="name.hasError('minlength')"><span translate>ERROR_MIN_LENGTH</span> 5</mat-error>
      <mat-error *ngIf="name.hasError('maxlength')"><span translate>ERROR_MAX_LENGTH</span> 60</mat-error>
      </mat-form-field>
    </div>

    <div class="control-input merchant-description"
         [ngClass]="{'merchant-name':  !(settings.shoveName)}"
    >
      <mat-form-field class="mat-form-field">
        <textarea matInput [placeholder]="'DESCRIPTION' | translate" [formControlName]="'description'"></textarea>
        <mat-hint align="end">{{description.value?.length || 0}}/120</mat-hint>
        <mat-error *ngIf="description.hasError('required')" translate>ERROR_REQUIRED</mat-error>
        <mat-error *ngIf="description.hasError('minlength')"><span translate>ERROR_MIN_LENGTH</span> 5</mat-error>
        <mat-error *ngIf="description.hasError('maxlength')"><span translate>ERROR_MAX_LENGTH</span> 120</mat-error>
      </mat-form-field>
    </div>

    <div class="merchant-control-row">
      <div class="control-input small">
        <mat-form-field>
          <mat-label><span translate>DEFAULT_COUNTRY_CODE</span></mat-label>
          <mat-select [formControlName]="'countryCode'">
            <mat-option *ngFor="let country of countriesList$ | async" [value]="country.phone">
              <span>{{country.name}}&nbsp;</span>
              <span>{{country.phone}}</span>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="control-input small">
        <mat-form-field class="mat-form-field">
          <input type="text" matInput perxCoreNumericCharacter [placeholder]="'CONTACT_NUMBER' | translate" [formControlName]="'phone'">
        </mat-form-field>
      </div>
    </div>

    <div class="control-input">
      <mat-form-field class="mat-form-field">
        <input type="text" matInput [placeholder]="'ADDRESS' | translate" [formControlName]="'address'">
      </mat-form-field>
    </div>
    <div class="merchant-control-row">
      <div class="control-input small">
        <mat-form-field class="mat-form-field">
          <input type="text" matInput [placeholder]="'CITY' | translate" [formControlName]="'city'">
        </mat-form-field>
      </div>
      <div class="control-input small">
        <mat-form-field class="mat-form-field">
          <input type="text" matInput [placeholder]="'STATE/PROVINCE' | translate" [formControlName]="'state'">
        </mat-form-field>
      </div>
      <div class="control-input small">
        <mat-form-field class="mat-form-field">
          <input type="text" matInput [placeholder]="'POSTAL_CODE' | translate" [formControlName]="'postalCode'">
        </mat-form-field>
      </div>
    </div>
    <div class="control-input">
      <mat-form-field class="mat-form-field">
        <input type="url" matInput [placeholder]="'WEBLINK' | translate" [formControlName]="'weblink'">
        <mat-error *ngIf="weblink.hasError('required')" translate>ERROR_REQUIRED</mat-error>
        <mat-error *ngIf="weblink.hasError('patternUrl')" translate>WRONG_PATTERN_WEB_LINK</mat-error>
      </mat-form-field>
    </div>

    <div class="merchant-branch">
      <cl-merchant-branch *ngFor="let control of branches.controls; let i = index;"
                          [group]="control"
                          [index]="i"
                          (removeGroup)="removeBranches($event)"

      ></cl-merchant-branch>
      <cl-button [classList]="'tertiary ph-0'"
                 class="merchant-btn-cancel"
                 (click)="addBranch()"
      >
      <span translate>
        ADD_NEW_BRANCH
      </span>
      </cl-button>
    </div>
  </div>
</section>


