<section class="create-merchant-form" [formGroup]="formMerchant">
  <div class="merchant-form">
    <div class="control-input merchant-upload-img">
      <cl-upload-graphic [formControl]="image"
                         [isRequired]="image.hasError('required') && image.touched">
        <span>+ Add Image</span>
      </cl-upload-graphic>
    </div>
    <div class="control-input merchant-name" *ngIf="settings.shoveName">
      <mat-form-field class="mat-form-field">
      <input type="text" matInput [placeholder]="'Merchant Name'" [formControl]="name">
      <mat-hint align="end">{{name.value?.length || 0}}/60</mat-hint>
      <mat-error *ngIf="name.hasError('required')">Required field</mat-error>
      <mat-error *ngIf="name.hasError('minlength')">Min length 5</mat-error>
      <mat-error *ngIf="name.hasError('maxlength')">Max length 60</mat-error>
      </mat-form-field>
    </div>

    <div class="control-input merchant-description"
         [ngClass]="{'merchant-name':  !(settings.shoveName)}"
    >
      <mat-form-field class="mat-form-field">
        <textarea matInput placeholder="Description" [formControlName]="'description'"></textarea>
        <mat-hint align="end">{{description.value?.length || 0}}/120</mat-hint>
        <mat-error *ngIf="description.hasError('required')">Required field</mat-error>
        <mat-error *ngIf="description.hasError('minlength')">Min length 5</mat-error>
        <mat-error *ngIf="description.hasError('maxlength')">Max length 120</mat-error>
      </mat-form-field>
    </div>

    <div class="merchant-control-row">
      <div class="control-input small">
        <mat-form-field>
          <mat-label>Default Country Code</mat-label>
          <mat-select [formControlName]="'countryCode'">
            <mat-option *ngFor="let country of countriesList$ | async" [value]="country.phone">
              <span>{{country.name}}&nbsp;</span>
              <span>{{country.phone}}</span>
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="control-input small">
        <mat-form-field class="mat-form-field">
          <input type="text" matInput perxCoreNumericCharacter [placeholder]="'Contact number'" [formControlName]="'phone'">
        </mat-form-field>
      </div>
    </div>

    <div class="control-input">
      <mat-form-field class="mat-form-field">
        <input type="text" matInput [placeholder]="'Address'" [formControlName]="'address'">
      </mat-form-field>
    </div>
    <div class="merchant-control-row">
      <div class="control-input small">
        <mat-form-field class="mat-form-field">
          <input type="text" matInput [placeholder]="'City'" [formControlName]="'city'">
        </mat-form-field>
      </div>
      <div class="control-input small">
        <mat-form-field class="mat-form-field">
          <input type="text" matInput [placeholder]="'State/Province'" [formControlName]="'state'">
        </mat-form-field>
      </div>
      <div class="control-input small">
        <mat-form-field class="mat-form-field">
          <input type="text" matInput [placeholder]="'Postal code'" [formControlName]="'postalCode'">
        </mat-form-field>
      </div>
    </div>
    <div class="control-input">
      <mat-form-field class="mat-form-field">
        <input type="url" matInput [placeholder]="'Weblink'" [formControlName]="'weblink'">
        <mat-error *ngIf="weblink.hasError('required')">Required field</mat-error>
        <mat-error *ngIf="weblink.hasError('patternUrl')">Wrong pattern web link</mat-error>
      </mat-form-field>
    </div>

    <div class="merchant-branch">
      <cl-merchant-branch *ngFor="let control of branches.controls; let i = index;"
                          [group]="control"
                          [index]="i"
                          (removeGroup)="removeBranches($event)"

      ></cl-merchant-branch>
      <cl-button [classList]="'tertiary ph-0'"
                 class="merchant-btn-cancel"
                 (click)="addBranch()"
      >
      <span>
        + Add new branch
      </span>
      </cl-button>
    </div>
  </div>
</section>


