<header class="page-header full-with">
  <h1 class="title">{{data?.name}}</h1>
  <div class="btn-group">
    <cs-button classList="secondary" routerLink="/rewards/">
      {{'BTN_CLOSE' | translate}}
    </cs-button>
    <cs-button classList="primary cs-btn-mobile" [routerLink]="'/rewards/edit/'+ id">
      <i class="cs-btn-mobile-icon icon edit-icon"></i>
      {{'BTN_EDIT' | translate}}
    </cs-button>
  </div>
</header>

<section class="content centered">

  <!--Available Vouchers-->
  <mat-card class="card dark-theme" *ngIf="data?.vouchersStatistics" expanded>
    <div class="reward-detail-content">
      <div class="reward-detail-mast">
        <h2 class="reward-detail-vouchers-value">
          <span>{{availableVouchers | number: '2.'}}</span>
          <small class="reward-detail-title">
            {{'AVAILABLE_VOUCHERS' | translate}}
          </small>
        </h2>
        <cs-button classList="tertiary opaque" (click)="openDialogReplenish()">
          {{'REPLENISH' | translate}}
        </cs-button>
      </div>
      <cs-statistics-progress-bar [options]="data?.vouchersStatistics" [itemName]="'VOUCHERS' | translate | lowercase"></cs-statistics-progress-bar>
    </div>
  </mat-card>
  <!--/ Available Vouchers-->

  <!--Voucher codes Issued-->
  <!-- temporary hide this panel, until api is ready -->
  <mat-expansion-panel class="card" *ngIf="false && dataSource?.data && dataSource?.data?.length > 0" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        {{'VOUCHER_CODES_ISSUED' | translate}}
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">

      <!--filters-->
      <cl-table-filters class="reward-detail-filters" [dataSource]="dataSource" classList="block">
        <ng-container *clTableFilter="'status'; let filter">
          <mat-form-field class="reward-detail-status-filter" appearance="outline">
            <mat-select [formControl]="filter" [placeholder]="'STATUS' | translate">
              <mat-option [value]="null">
                {{'ALL' | translate}}
              </mat-option>
              <mat-option *ngFor="let option of statusFilterConfig" [value]="option.value">
                {{'' | translate}}
                {{option.value}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </cl-table-filters>
      <!--table-->
      <cl-rewards-campaigns-list [dataSource]="dataSource"></cl-rewards-campaigns-list>
      <!--paginator-->
      <mat-paginator class="paginator" [pageSizeOptions]="[5, 10, 20]"></mat-paginator>
    </div>
  </mat-expansion-panel>
  <!--/ Voucher codes Issued-->

  <!--Reward Info-->
  <mat-expansion-panel class="card" *ngIf="data?.rewardInfo" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        {{'REWARD_INFO' | translate}}
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">
      <cl-reward-info-preview [data]="data?.rewardInfo">
      </cl-reward-info-preview>
    </div>
  </mat-expansion-panel>
  <!--/ Reward Info-->

  <!-- Merchant Info-->
  <mat-expansion-panel class="card" *ngIf="data?.merchantInfo" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        {{'MERCHANT_INFO' | translate}}
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">
      <cl-reward-merchant-item [merchant]="data?.merchantInfo"></cl-reward-merchant-item>
    </div>
  </mat-expansion-panel>
  <!--Merchant Info-->

  <!--Vouchers-->
  <mat-expansion-panel class="card" *ngIf="data?.vouchers" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        {{'VOUCHERS' | translate}}
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">
      <cl-reward-vouchers-preview [data]="data?.vouchers"></cl-reward-vouchers-preview>
    </div>
  </mat-expansion-panel>

  <!--  Limits-->
  <mat-expansion-panel class="card" *ngIf="data?.limits" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        {{'LIMITS' | translate}}
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">
      <cl-reward-limits-preview [data]="data?.limits"></cl-reward-limits-preview>
    </div>
  </mat-expansion-panel>
  <!--  / Limits-->
</section>
