<header class="page-header full-with">
  <h1 class="title">{{data?.name}}</h1>
  <div class="btn-group">
    <cl-button classList="secondary" routerLink="/rewards/">Close</cl-button>
    <cl-button classList="primary cta cta-edit" [routerLink]="'/rewards/edit/'+ id">Edit</cl-button>
  </div>
</header>

<section class="content centered">

  <!--Available Vouchers-->
  <mat-card class="card dark-theme" *ngIf="data?.vouchersStatistics" expanded>
    <div class="reward-detail-content">
      <div class="reward-detail-mast">
        <h2 class="reward-detail-vouchers-value">
          <span>{{availableVouchers | number: '2.'}}</span>
          <small class="reward-detail-title">Available Vouchers</small>
        </h2>
        <cl-button classList="tertiary opaque" (click)="openDialogReplenish()">Replenish</cl-button>
      </div>
      <cl-vouchers-progress-bar [options]="data?.vouchersStatistics"></cl-vouchers-progress-bar>
    </div>
  </mat-card>
  <!--/ Available Vouchers-->

  <!--Voucher codes Issued-->
  <!-- temporary hide this panel, until api is ready -->
  <mat-expansion-panel class="card" *ngIf="false && dataSource?.data && dataSource?.data?.length > 0" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        Voucher codes Issued (15 Campaigns)
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">

      <!--filters-->
      <cl-table-filters class="reward-detail-filters" [dataSource]="dataSource" classList="block">
        <ng-container *clTableFilter="'status'; let filter">
          <mat-form-field class="reward-detail-status-filter" appearance="outline">
            <mat-select [formControl]="filter" placeholder="Status">
              <mat-option [value]="null">
                All
              </mat-option>
              <mat-option *ngFor="let option of statusFilterConfig" [value]="option.value">
                {{option.value}}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </ng-container>
      </cl-table-filters>
      <!--table-->
      <cl-rewards-campaigns-list [dataSource]="dataSource"></cl-rewards-campaigns-list>
      <!--paginator-->
      <mat-paginator class="paginator" [pageSizeOptions]="[5, 10, 20]"></mat-paginator>
    </div>
  </mat-expansion-panel>
  <!--/ Voucher codes Issued-->

  <!--Reward Info-->
  <mat-expansion-panel class="card" *ngIf="data?.rewardInfo" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        Reward Info
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">
      <cl-reward-info-preview [data]="data?.rewardInfo">
      </cl-reward-info-preview>
    </div>
  </mat-expansion-panel>
  <!--/ Reward Info-->

  <!-- Merchant Info-->
  <mat-expansion-panel class="card" *ngIf="data?.merchantInfo" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        Merchant Info
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">
      <cl-reward-merchant-item [merchant]="data?.merchantInfo"></cl-reward-merchant-item>
    </div>
  </mat-expansion-panel>
  <!--Merchant Info-->

  <!--Vouchers-->
  <mat-expansion-panel class="card" *ngIf="data?.vouchers" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        Vouchers
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">
      <cl-reward-vouchers-preview [data]="data?.vouchers"></cl-reward-vouchers-preview>
    </div>
  </mat-expansion-panel>

  <!--  Limits-->
  <mat-expansion-panel class="card" *ngIf="data?.limits" expanded>
    <mat-expansion-panel-header class="card-header">
      <h2 class="reward-detail-title">
        Limits
      </h2>
    </mat-expansion-panel-header>
    <div class="card-content">
      <cl-reward-limits-preview [data]="data?.limits"></cl-reward-limits-preview>
    </div>
  </mat-expansion-panel>
  <!--  / Limits-->
</section>
