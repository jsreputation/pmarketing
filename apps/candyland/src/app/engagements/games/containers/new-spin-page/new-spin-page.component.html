<article class="stamp-wrap" *ngIf="spinData" [formGroup]="formSpin">
  <header class="page-header full-with">
    <mat-form-field class="pagetitle-input" floatLabel="never">
      <input type="text" matInput formControlName="name" [placeholder]="'ENTER_TITLE_HERE' | translate">
      <mat-error *ngIf="name.hasError('required')"><span translate>ERROR_REQUIRED</span></mat-error>
      <mat-error *ngIf="name.hasError('minlength')"><span translate>ERROR_MIN_LENGTH</span> 1</mat-error>
      <mat-error *ngIf="name.hasError('maxlength')"><span translate>ERROR_MAX_LENGTH</span> 60</mat-error>
    </mat-form-field>
    <div class="btn-group">
      <cl-button [classList]="'secondary'" class="stamp-btn-cancel" (click)="comeBack()">
       <span translate>
        BTN_CANCEL
      </span>
      </cl-button>
      <cl-button [classList]="'primary cta cta-save'" (click)="save()">
        <span translate>
          BTN_SAVE
        </span>
      </cl-button>
    </div>
  </header>
  <section class="content form-limiter">
    <div class="phonepreview-wrapper">
      <div class="stamp-form">
        <mat-card class="card-fieldset">
          <h2 class="card-fieldset-title sub-title" translate>
            MESSAGES
          </h2>
          <div class="stamp-form">
            <div class="control-input">
              <mat-form-field class="messages-input">
                <input type="text" [placeholder]="'HEADLINE_MESSAGE' | translate" matInput formControlName="headlineMessage">
                <mat-hint align="end">{{headlineMessage.value?.length || 0}}/60</mat-hint>
                <mat-error *ngIf="headlineMessage.hasError('required')"><span translate>ERROR_REQUIRED</span></mat-error>
                <mat-error *ngIf="headlineMessage.hasError('minlength')"><span translate>ERROR_MIN_LENGTH</span> 5</mat-error>
                <mat-error *ngIf="headlineMessage.hasError('maxlength')"><span translate>ERROR_MAX_LENGTH</span> 60</mat-error>
              </mat-form-field>
            </div>
            <div class="control-input">
              <mat-form-field class="messages-input">
                <input type="text" matInput [placeholder]="'SUB-HEADLINE_MESSAGE' | translate" formControlName="subHeadlineMessage">
                <mat-hint align="end">{{subHeadlineMessage.value?.length || 0}}/60</mat-hint>
                <mat-error *ngIf="subHeadlineMessage.hasError('required')"><span translate>ERROR_REQUIRED</span></mat-error>
                <mat-error *ngIf="subHeadlineMessage.hasError('minlength')"><span translate>ERROR_MIN_LENGTH</span> 5</mat-error>
                <mat-error *ngIf="subHeadlineMessage.hasError('maxlength')"><span translate>ERROR_MAX_LENGTH</span> 60</mat-error>
              </mat-form-field>
            </div>
          </div>
        </mat-card>

        <mat-card class="card-fieldset">
          <h2 class="card-fieldset-title sub-title" translate>
            GAME_GRAPHIC
          </h2>
          <div class="game-form">
            <div class="game-number">
              <div class="control-input" *ngIf="spinData?.numberOfWedges">
                <h3 class="card-fieldset-label" translate>
                  Total Number of Wedge
                </h3>
                <div class="slider">
                  <mat-slider
                    class="slider-stamps-number"
                    color="primary"
                    [max]="10"
                    [min]="3"
                    [step]="1"
                    [thumbLabel]="true"
                    formControlName="numberOfWedges"
                  >
                  </mat-slider>
                </div>
              </div>
            </div>
            <div class="game-number game-number-slot">
              <div class="control-input reward-slot" *ngIf="rewardSlotNumbers">
                <h3 class="card-fieldset-label" translate>
                  REWARD_SLOT
                </h3>
                <cl-checkbox-group class="btn-list btn-medium-list" formControlName="rewardSlots">
                  <ng-container *ngFor="let slot of rewardSlotNumbers">
                    <mat-checkbox color="primary" [value]="slot?.value">
                      <div>{{slot?.viewValue}}</div>
                    </mat-checkbox>
                  </ng-container>
                </cl-checkbox-group>
              </div>
            </div>

            <div formGroupName="colorCtrls">
              <div class="control-input-splitter">
                <ng-container *ngFor="let ctrlIndex of colorCtrlsToLoop; let i = index;">
                  <div class="control-input">
                    <label class="card-fieldset-label">
                    <span>
                     Wedge #{{i + 1}} Color
                    </span>
                    </label>
                    <cl-color-picker [formControlName]="ctrlIndex" aria-label="pick primary color"></cl-color-picker>
                  </div>
                </ng-container>
              </div>
            </div>

            <div class="control-img_asset">
              <h3 class="card-fieldset-label" translate>
                Reward Icon
              </h3>
              <div class="game-gift-box_field">
                <cl-select-graphic-wrap *ngIf="spinData?.rewardIcon"
                  formControlName="rewardIcon"
                  [graphicList]="spinData?.rewardIcon"
                ></cl-select-graphic-wrap>
              </div>
            </div>

            <div class="control-img_asset">
              <h3 class="card-fieldset-label" translate>
                BACKGROUND
              </h3>
              <div class="game-gift-box_field">
                <cl-select-graphic-wrap *ngIf="spinData?.background"
                                        formControlName="background"
                                        [isRequired]="background.hasError('required') && background.touched"
                                        [graphicList]="spinData?.background">
                </cl-select-graphic-wrap>
              </div>
            </div>

            <div class="control-img_asset">
              <h3 class="card-fieldset-label">
                Wheel Image
              </h3>
              <div class="game-gift-box_field">
                <cl-select-graphic *ngIf="spinData?.wheelImg"
                                        formControlName="wheelImg"
                                        [graphicList]="spinData?.wheelImg">
                </cl-select-graphic>
              </div>
            </div>

            <div class="control-img_asset">
              <h3 class="card-fieldset-label">
                Wheel Position
              </h3>
              <div class="game-gift-box_field">
                <cl-select-graphic *ngIf="spinData?.wheelPosition"
                                        formControlName="wheelPosition"
                                        [graphicList]="spinData?.wheelPosition">
                </cl-select-graphic>
              </div>
            </div>

            <div class="control-img_asset">
              <h3 class="card-fieldset-label">
                Pointer Image
              </h3>
              <div class="game-gift-box_field">
                <cl-select-graphic *ngIf="spinData?.pointerImg"
                                        formControlName="pointerImg"
                                        [graphicList]="spinData?.pointerImg">
                </cl-select-graphic>
              </div>
            </div>
          </div>
        </mat-card>
        <mat-card class="card-fieldset">
          <h2 class="card-fieldset-title sub-title" translate>
            BUTTON
          </h2>
          <div class="messages-form">
            <div class="control-input">
              <mat-form-field class="messages-input">
                <input type="text" [placeholder]="'Button text'" matInput formControlName="buttonText">
                <mat-hint align="end">{{buttonText.value?.length || 0}}/20</mat-hint>
                <mat-error *ngIf="buttonText.hasError('required')">Required field</mat-error>
                <mat-error *ngIf="buttonText.hasError('minlength')">Min length 2</mat-error>
                <mat-error *ngIf="buttonText.hasError('maxlength')">Max length 20</mat-error>
              </mat-form-field>
            </div>
          </div>
        </mat-card>
      </div>

        <cl-simple-mobile-view class="second-tab"
                               [background]="getImgLink(background, 'assets/images/background/background1.png')"
                               [mobileImageClass]="'mobile-non-header'" [headerColor]="tenantSettings?.headerColor"
                               [logo]="tenantSettings?.logo" [logoType]="tenantSettings?.logoType" [fontFamily]="tenantSettings?.font">
              <!-- i will need to pass down more things into the component-->
              <div class="plugin-block">
                  <div class="mobile-preview-header">
                    <p class="mobile-preview-headline light">
                      {{headlineMessage.value}}
                    </p>
                    <p class="mobile-preview-sub-headline light">
                      {{subHeadlineMessage.value}}
                    </p>
                  </div>

                  <perx-core-spin-the-wheel
                    [class]="perxCoreSpinClass"
                    [classPosition]="perxCoreSpinClass"
                    [pointerImg]="getImgLink(pointerImg, '')"
                    [wheelImg]="getImgLink(wheelImg, '')"
                    [spinDuration]="2" [slices]="iSlices">
                  </perx-core-spin-the-wheel>

              </div>

          <div class="mobile-preview-btn-wrap mobile-btn-block">
            <button class="mobile-preview-btn"
                    [ngStyle]="{
                      'color': tenantSettings?.buttonTextColor,
                      backgroundColor: tenantSettings?.buttonColor,
                      'font-family': tenantSettings?.font
                    }">
              {{buttonText.value}}
            </button>
          </div>
        </cl-simple-mobile-view>
    </div>
  </section>
</article>
