<div *ngIf="preAuth; then thenBlock else elseBlock"></div>
<ng-template #thenBlock>
  <mat-card>
    <mat-card-content>
      <div *ngIf="failedAuth; then failAuthBlock else authingBlock"></div>
      <ng-template #authingBlock>
        <mat-card-subtitle>One moment while we log you in...</mat-card-subtitle>
        <div class="login-spinner-container">
          <mat-progress-spinner
              [diameter]="30"
              [color]="'primary'"
              [mode]="'indeterminate'">
          </mat-progress-spinner>
        </div>
      </ng-template>
      <ng-template #failAuthBlock>
        <div class="failBlock">
          <span class="title"><mat-card-title>Login failed :(</mat-card-title></span>
          <mat-card-subtitle class="subtitle">Please try again</mat-card-subtitle>
        </div>
      </ng-template>

    </mat-card-content>
  </mat-card>
</ng-template>
<ng-template #elseBlock>
  <form #loginForm="ngForm" (ngSubmit)="onSubmit(loginForm)">

    <!-- To be replaced by proper components-->
    <input placeholder="Enter your username" type="text" name="username" ngModel required #username="ngModel">
    <input placeholder="Enter your password" type="text" name="password" ngModel required #password="ngModel">
    <button mat-flat-button type="submit" color="primary">Sign In</button>
  </form>
</ng-template>
